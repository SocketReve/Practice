/*! Practice Grunt 01-11-2014 */
angular.module("PracticeSimulator").service("PracticeCOMPFunctions",function(){var PracticeCOMPFunctions={};return PracticeCOMPFunctions.SUM=function(array){for(var somma=0,i=0;i<array.length;i++)somma+=array[i];return somma},PracticeCOMPFunctions.MIN=function(array){for(var minore=array[0],i=0;i<array.length;i++)array[i]<minore&&(minore=array[i]);return minore},PracticeCOMPFunctions.MAX=function(array){for(var maggiore=array[0],i=0;i<array.length;i++)array[i]>maggiore&&(maggiore=array[i]);return maggiore},PracticeCOMPFunctions}),angular.module("PracticeSimulator").factory("Graph2",function($q,$timeout,$window,$sanitize){function getNodeHTMLLabel(id,description,type,provider,mem,risk,func){var htmlTemplate="<div class='customNode'>";return htmlTemplate+="<span class='type "+$sanitize(type)+"'> </span>",htmlTemplate+="<span class='name'>"+camelCase($sanitize(id))+"</span>",htmlTemplate+="<span class='description'>"+$sanitize(description)+"</span>",htmlTemplate+="<span class='provider'>"+$sanitize(provider.toUpperCase())+"</span>",htmlTemplate+="<span class='mem'>"+$sanitize(mem)+("COMP"==type?" | "+$sanitize(func):"")+"</span>",htmlTemplate+="<span class='risk'>"+$sanitize(risk)+"</span>",htmlTemplate+="</div>"}function camelCase(input){return input.replace(/ (.)/g,function(match,group1){return group1.toUpperCase()})}var g,renderer,zoom,svg,layout,model,scale=.85,scaleOnParameter=.8,initialized=!1,Graph=function(nodes,edges){var defer=$q.defer();return angular.element(document).ready(function(){initialized=!0,defer.resolve(),svg=d3.select("svg"),centerG=svg.append("g"),zoomG=centerG.append("g"),zoom=dagreD3.zoom.panAndZoom(d3.select("svg g g")),renderer=new dagreD3.Renderer,dagreD3.zoom(svg,zoom),layout=dagreD3.layout().nodeSep(70).rankSep(100),g=new dagreD3.Digraph({multigraph:!0});var oldDrawEdgePath=renderer.drawEdgePaths();renderer.drawEdgePaths(function(graph,root){var svgEdges=oldDrawEdgePath(graph,root);return svgEdges.attr("id",function(edge){return edge}),svgEdges.attr("time",function(edge){return g.edge(edge).label}),svgEdges.attr("from",function(edge){return g.edge(edge).from}),svgEdges.attr("to",function(edge){return g.edge(edge).to}),svgEdges.attr("class",function(edge){return"edgePath enter "+(g.edge(edge).highlight?"green":"")}),svgEdges});var oldDrawNodes=renderer.drawNodes();renderer.drawNodes(function(graph,root){var svgNodes=oldDrawNodes(graph,root);return svgNodes.attr("id",function(u){return u}),svgNodes.select("rect").attr("class",function(u){return g.node(u).highlight?"green":""}),svgNodes});var oldDrawEdgeLabels=renderer.drawEdgeLabels();renderer.drawEdgeLabels(function(graph,root){var svgLabel=oldDrawEdgeLabels(graph,root);return svgLabel.attr("id",function(edge){return edge}),svgLabel});for(var i=0;i<nodes.length;i++)g.addNode(nodes[i].id,{labelType:"html",label:getNodeHTMLLabel(nodes[i].id,nodes[i].value.descr,nodes[i].value.type,nodes[i].value.provider.toUpperCase(),nodes[i].value.mem,nodes[i].value.risk,nodes[i].value.func),descr:nodes[i].value.descr,type:nodes[i].value.type,provider:nodes[i].value.provider.toUpperCase(),mem:parseInt(nodes[i].value.mem),risk:parseFloat(nodes[i].value.risk),func:nodes[i].value.func,highlight:nodes[i].value.highlight});for(var i=0;i<edges.length;i++)g.addEdge(edges[i].id,edges[i].value.from,edges[i].value.to,{label:edges[i].value.label,from:edges[i].value.from,to:edges[i].value.to,highlight:edges[i].value.highlight});renderer.layout(layout),model=renderer.run(g,d3.select("svg g g")),Graph.resize()}),angular.element($window).bind("resize",function(){Graph.resize()}),defer.promise};return Graph.isInitialized=function(){return initialized},Graph.getRawNode=function(node){return g.node(node)},Graph.getRawEdge=function(edge){return g.edge(edge)},Graph.getEdges=function(){var edgesName=g.edges(),edges=[];return edgesName.forEach(function(e){edges.push({id:e,value:g.edge(e)})}),edges},Graph.getNodes=function(){var nodesName=g.nodes(),nodes=[];return nodesName.forEach(function(u){nodes.push({id:u,value:g.node(u)})}),nodes},Graph.setEdgeLabel=function(id,label){g.edge(id).label=label.toString()},Graph.setNodeDescription=function(id,description){var temp=g.node(id);g.node(id).descr=description,g.node(id).label=getNodeHTMLLabel(id,description,temp.type,temp.provider,temp.mem,temp.risk,temp.func)},Graph.setNodeMem=function(id,mem){var temp=g.node(id);g.node(id).mem=parseInt(mem),g.node(id).label=getNodeHTMLLabel(id,temp.descr,temp.type,temp.provider,mem,temp.risk,temp.func)},Graph.setNodeProvider=function(id,provider){var temp=g.node(id);g.node(id).provider=provider,g.node(id).label=getNodeHTMLLabel(id,temp.descr,temp.type,provider,temp.mem,temp.risk,temp.func)},Graph.setNodeType=function(id,type){var temp=g.node(id);g.node(id).type=type,g.node(id).label=getNodeHTMLLabel(id,temp.descr,type,temp.provider,temp.mem,temp.risk,temp.func)},Graph.setNodeFunc=function(id,func){var temp=g.node(id);g.node(id).func=func,g.node(id).label=getNodeHTMLLabel(id,temp.descr,temp.type,temp.provider,temp.mem,temp.risk,func)},Graph.setNodeRisk=function(id,risk){var temp=g.node(id);g.node(id).risk=parseFloat(risk),g.node(id).label=getNodeHTMLLabel(id,temp.descr,temp.type,temp.provider,temp.mem,risk,temp.func)},Graph.resize=function(){var graphWidth=model.graph().width+5,graphHeight=model.graph().height+5,width=parseInt(svg.style("width").replace(/px/,"")),height=parseInt(svg.style("height").replace(/px/,"")),zoomScale=Math.min(width/graphWidth*scale,height/graphHeight*scale),translate=[width/2-graphWidth*zoomScale/2+10,height/2-graphHeight*zoomScale/2];zoom.translate(translate),zoom.scale(zoomScale),zoom.event(svg.transition().duration(500))},Graph.addNode=function(id,description,type,provider,mem,risk,func){try{g.addNode(camelCase(id.trim()),{labelType:"html",label:getNodeHTMLLabel(id,description,type,provider,mem,risk,func),descr:description,type:type,provider:provider.toUpperCase(),mem:parseInt(mem),risk:parseFloat(risk),func:func,highlight:!1})}catch(err){throw{message:"Node already in graph or input not valid"}}Graph.redesign(),$timeout(function(){Graph.scale("parameters")},500)},Graph.addEdge=function(source,target,time){try{g.addEdge(camelCase(source)+"-"+camelCase(target)+"-"+time.toString(),camelCase(source),camelCase(target),{label:time.toString(),from:camelCase(source),to:camelCase(target),highlight:!1})}catch(err){throw{message:"Edge is already in the graph or input not valid"}}Graph.redesign(),$timeout(function(){Graph.resize()},500)},Graph.removeNode=function(id){try{g.delNode(id)}catch(err){throw{message:"Node not exists, input not valid. Graph cannot exits without nodes"}}Graph.redesign(),$timeout(function(){Graph.resize()},500)},Graph.removeEdge=function(id){try{g.delEdge(id)}catch(err){throw{message:"Communication not exists"}}Graph.redesign()},Graph.redesign=function(){renderer.transition(function(selection){return selection.transition().duration(500)}),model=renderer.run(g,d3.select("svg g g"))},Graph.getElements=function(){return dagreD3.json.encode(g)},Graph.scale=function(scaleMod){var translate,graphWidth=model.graph().width+5,graphHeight=model.graph().height+5,width=parseInt(svg.style("width").replace(/px/,"")),height=parseInt(svg.style("height").replace(/px/,""));if("original"==scaleMod){var zoomScale=Math.min(width/graphWidth*scale,height/graphHeight*scale);translate=[width/2-graphWidth*zoomScale/2+10,height/2-graphHeight*zoomScale/2]}else if("parameters"==scaleMod){var zoomScale=Math.min(width/graphWidth*scaleOnParameter,height/graphHeight*scaleOnParameter);translate=[1.5*graphWidth>width?graphWidth/3:graphWidth,height/2-graphHeight*zoomScale/2]}zoom.translate(translate),zoom.scale(zoomScale),zoom.event(svg.transition().duration(500))},Graph.highlightEdge=function(edge,activate){g.edge(edge).highlight=1==activate?!0:!1},Graph.highlightNode=function(node,activate){g.node(node).highlight=1==activate?!0:!1},Graph.resetHighlight=function(){g.nodes().forEach(function(u){g.node(u).highlight=!1}),g.edges().forEach(function(e){g.edge(e).highlight=!1})},Graph}),angular.module("PracticeSimulator").factory("Practice",function($q,$interval,Graph2,PracticeCOMPFunctions){var nodes,instants,maxTime,rawElements,interval,actualTimeSimulation,matrixNodePerInstants,Practice=function(){maxTime=0,nodes={},instants={},matrixNodePerInstants=[],rawElements=Graph2.getElements();for(var i=0;i<rawElements.nodes.length;i++)nodes[rawElements.nodes[i].id]={ID:rawElements.nodes[i].id,IN:{length:function(){var key,size=0;for(key in this)this.hasOwnProperty(key)&&size++;return size-1}},OUT:{length:function(){var key,size=0;for(key in this)this.hasOwnProperty(key)&&size++;return size-1}},TYPE:rawElements.nodes[i].value.type,RISK:rawElements.nodes[i].value.risk,PROVIDER:rawElements.nodes[i].value.provider,MEM:{array:"COMP"==rawElements.nodes[i].value.type||"RES"==rawElements.nodes[i].value.type?[]:[rawElements.nodes[i].value.mem],value:rawElements.nodes[i].value.mem},FUNC:rawElements.nodes[i].value.func};for(var i=0;i<rawElements.edges.length;i++)nodes[rawElements.edges[i].v].IN[rawElements.edges[i].u]=!0,nodes[rawElements.edges[i].u].OUT[rawElements.edges[i].v]=!0;for(var i=0;i<rawElements.edges.length;i++)parseInt(rawElements.edges[i].value.label)>maxTime&&(maxTime=parseInt(rawElements.edges[i].value.label));for(var j=0,i=0;i<rawElements.edges.length;i++){for(var k=0;k<rawElements.edges.length;k++)if(parseInt(rawElements.edges[k].value.label)==j)try{instants[j].push({IN:rawElements.edges[k].u,OUT:rawElements.edges[k].v,EDGE:rawElements.edges[k].id})}catch(err){instants[j]=[],instants[j].push({IN:rawElements.edges[k].u,OUT:rawElements.edges[k].v,EDGE:rawElements.edges[k].id})}j++}};return Practice.getNodes=function(){return nodes},Practice.getInstants=function(){return instants},Practice.getTableNodePerInstants=function(){return matrixNodePerInstants},Practice.checkGraph=function(){for(key in nodes){if("COMP"==nodes[key].TYPE&&nodes[key].IN.length()<=1)throw{message:"COMP node '"+key+"' not have at least 2 input edges"};if("RES"==nodes[key].TYPE&&nodes[key].OUT.length()>0)throw{message:"RES node '"+key+"' can't have any exit communication"};if("IN"==nodes[key].TYPE&&nodes[key].IN.length()>0)throw{message:"IN node '"+key+"' can't have any input edges"}}},Practice.runIntervalSimulation=function(intervalTime){var defer=$q.defer();return actualTimeSimulation=0,Graph2.resetHighlight(),interval=$interval(function(){Practice.simulationStep(defer)},intervalTime),defer.promise},Practice.runStepSimulation=function(){actualTimeSimulation=0,Graph2.resetHighlight(),Practice.simulationStep()},Practice.simulationStep=function(defer){try{if(actualTimeSimulation>0)for(var i=0;i<instants[actualTimeSimulation-1].length;i++)Graph2.highlightEdge(instants[actualTimeSimulation-1][i].EDGE,!1),Graph2.highlightNode(instants[actualTimeSimulation-1][i].IN,!1),Graph2.highlightNode(instants[actualTimeSimulation-1][i].OUT,!1)}catch(err){console.log("SIMULATION TIMER: Time step missing in de-highlighting")}try{for(var i=0;i<instants[actualTimeSimulation].length;i++)Graph2.highlightEdge(instants[actualTimeSimulation][i].EDGE,!0),Graph2.highlightNode(instants[actualTimeSimulation][i].IN,!0),Graph2.highlightNode(instants[actualTimeSimulation][i].OUT,!0);for(var mapArrayOfMemoriesOutput={},i=0;i<instants[actualTimeSimulation].length;i++)try{mapArrayOfMemoriesOutput[instants[actualTimeSimulation][i].OUT].push(nodes[instants[actualTimeSimulation][i].IN].MEM.value)}catch(err){mapArrayOfMemoriesOutput[instants[actualTimeSimulation][i].OUT]=[],mapArrayOfMemoriesOutput[instants[actualTimeSimulation][i].OUT].push(nodes[instants[actualTimeSimulation][i].IN].MEM.value)}for(node in mapArrayOfMemoriesOutput)if("function"==typeof PracticeCOMPFunctions[nodes[node].FUNC]){var temp=PracticeCOMPFunctions[nodes[node].FUNC](mapArrayOfMemoriesOutput[node]);nodes[node].MEM.array.push(temp),nodes[node].MEM.value=PracticeCOMPFunctions[nodes[node].FUNC](nodes[node].MEM.array),Graph2.setNodeMem(node,nodes[node].MEM.value)}else nodes[node].MEM.array.push(mapArrayOfMemoriesOutput[node]),Graph2.setNodeMem(node,nodes[node].MEM.array);Graph2.redesign()}catch(err){console.log("SIMULATION TIMER: Time step missing")}if(matrixNodePerInstants.push(angular.copy(nodes)),actualTimeSimulation==maxTime+1){if($interval.cancel(interval),"undefined"==typeof defer)return!1;defer.resolve()}actualTimeSimulation++},Practice}),angular.module("PracticeSimulator").service("PracticeSETOperations",function(){var PracticeSETOperations={};return PracticeSETOperations.PowerSet=function(o,w,e,r,s,E,t){for(r=[s=1<<(E=o.length)];s;)for(w=s.toString(2),e=t=w.length,r[--s]=[];e;)~-w[--e]||r[s].push(o[e+E-t]);return r},PracticeSETOperations}),angular.module("PracticeSimulator").controller("PracticeChartsController",function($scope,$modalInstance,$timeout,Practice,PracticeSETOperations){Practice();var powerSet,nodes=Practice.getNodes(),nodesArray=[];for(node in nodes)nodes.hasOwnProperty(node)&&nodesArray.push(nodes[node]);powerSet=PracticeSETOperations.PowerSet(nodesArray);for(var nodesRanking=[],i=0;i<powerSet.length-1;i++){for(var name="",risk=1,j=0;j<powerSet[i].length;j++)name=name+(""!=name?"-":"")+powerSet[i][j].ID,risk*=powerSet[i][j].RISK;nodesRanking.push({name:name,y:risk,x:powerSet[i].length})}console.log(nodesRanking),$timeout(function(){var chart=new CanvasJS.Chart("practice-scatter-plot",{title:{text:"Cost Impact on Business for leaked information",fontFamily:"arial black",fontColor:"DarkSlateGrey",fontSize:15},axisX:{title:"Number of node aggregates",titleFontFamily:"arial",titleFontSize:12},axisY:{title:"Risk",titleFontFamily:"arial",titleFontSize:12},data:[{type:"scatter",color:"#17cf00",toolTipContent:"<span style='\"'color: {color};'\"'><strong>{name}</strong></span> <br/> <strong>Risk</strong> {y}<br/> <strong>Number of nodes aggregates</strong> {x} ",dataPoints:nodesRanking}],zoomEnabled:!0});chart.render()},100),$scope.exit=function(){$modalInstance.dismiss("exit")}}),angular.module("PracticeSimulator").controller("PracticeMainController",function($scope,$modal,$interval,$timeout,$q,Graph2,Practice,PracticeCOMPFunctions){function customAlert(message){console.log(message),$scope.alert=!0,$scope.alertMessage=message.message,$scope.alertType="success"==message.type?"success":"danger",$timeout(function(){$scope.alert=!1,$scope.alertMessage=""},3e3)}function bindCustomEvents(){for(var nodesEvents=document.getElementsByClassName("node"),i=0;i<nodesEvents.length;i++)angular.element(nodesEvents[i]).on("click",function(){$scope.modifierIsNode=!0,$scope.modifierIsEdge=!1,$scope.showModifier(!0);var node=Graph2.getRawNode(this.id);$scope.nodeTypeModifier=node.type,$scope.nodeFuncModifier=node.func,$scope.nodeNameModifier=this.id,$scope.nodeDescriptionModifier=node.descr,$scope.nodeGroupModifier=node.provider,$scope.nodeMemModifier=node.mem,$scope.nodeRiskModifier=node.risk});for(var edgesEvents=document.getElementsByClassName("edgeLabel"),i=0;i<edgesEvents.length;i++)angular.element(edgesEvents[i]).on("click",function(){$scope.modifierIsNode=!1,$scope.modifierIsEdge=!0,$scope.showModifier(!0);var edge=Graph2.getRawEdge(this.id);$scope.edgeIdModifier=this.id,$scope.edgeLabelModifier=parseInt(edge.label)});angular.element(document).on("keyup",function(e){27==e.keyCode?($scope.showParameters(!1),$scope.showModifier(!1)):83==e.keyCode?1==$scope.simulationStepRunning&&($scope.simulationStep(),$scope.$apply()):84==e.keyCode&&(1==$scope.simulationRunning||1==$scope.simulationStepRunning)&&$scope.generateRuntimeTable()})}$scope.nameNew="",$scope.descrizioneNew="",$scope.fromNew="",$scope.toNew="",$scope.memNew=0,$scope.timeNew=0,$scope.riskNew=.1,$scope.groupOfNodeNew="",$scope.newGroupName="",$scope.nodeGroupModifier="",$scope.nodeTypeNew="IN",$scope.nodeTypeModifier="COMP",$scope.nodeFuncModifier="",$scope.nodeNameModifier="",$scope.nodeMemModifier=0,$scope.nodeRiskModifier=.1,$scope.nodeDescriptionModifier="",$scope.edgeIdModifier="",$scope.edgeLabelModifier=0,$scope.simulationRunning=!1,$scope.simulationStepRunning=!1,$scope.funcOfCompNode=[],$scope.alert=!1;for(type in PracticeCOMPFunctions)$scope.funcOfCompNode.push(type);bindCustomEvents(),$scope.addNode=function(){if(0==Graph2.isInitialized()){var nodes=[{id:$scope.nameNew.trim(),value:{descr:$scope.descrizioneNew.trim().toUpperCase(),type:$scope.nodeTypeNew,provider:$scope.providerNodeNew.trim(),mem:parseInt($scope.memNew),risk:parseFloat($scope.riskNew),func:$scope.nodeFunctionNew,highlight:!1}}];Graph2(nodes,[]).then(function(){bindCustomEvents()}),$scope.nameNew="",$scope.descrizioneNew="",$scope.providerNodeNew="",$scope.memNew=0,$scope.riskNew=.1}else if(""!=$scope.nameNew.trim()&&""!=$scope.descrizioneNew.trim()&&""!=$scope.providerNodeNew.trim())try{Graph2.addNode($scope.nameNew.trim(),$scope.descrizioneNew.trim(),$scope.nodeTypeNew,$scope.providerNodeNew.trim(),$scope.memNew,$scope.riskNew,$scope.nodeFunctionNew),$scope.nameNew="",$scope.descrizioneNew="",$scope.providerNodeNew="",$scope.memNew=0,$scope.riskNew=.1}catch(err){customAlert(err)}else customAlert("Not compiled all input form");bindCustomEvents()},$scope.addCommunication=function(){if(""!=$scope.fromNew.trim()&&""!=$scope.toNew.trim())try{Graph2.addEdge($scope.fromNew.trim(),$scope.toNew.trim(),$scope.timeNew),$scope.fromNew="",$scope.toNew="",$scope.timeNew=0}catch(err){customAlert(err)}else customAlert("Not compiled all input form");bindCustomEvents()},$scope.showModifier=function(condition){1==condition?angular.element(document.getElementById("modifier")).removeClass("hide"):angular.element(document.getElementById("modifier")).addClass("hide")},$scope.showParameters=function(condition){1==condition?(angular.element(document.getElementById("parameters")).addClass("slideRight"),Graph2.isInitialized()&&Graph2.scale("parameters")):angular.element(document.getElementById("parameters")).hasClass("slideRight")&&(angular.element(document.getElementById("parameters")).removeClass("slideRight"),Graph2.isInitialized()&&Graph2.scale("original"))},$scope.resetZoom=function(){Graph2.resize()},$scope.reloadPage=function(){location.reload()},$scope.downloadGraph=function($event){try{var json=JSON.stringify({nodes:Graph2.getNodes(),edges:Graph2.getEdges()}),blob=new Blob([json],{type:"application/json"}),url=URL.createObjectURL(blob);$event.target.download="graph.json",$event.target.href=url}catch(err){customAlert({message:"Graph Empty"})}},$scope.uploadGraph=function(){var input=document.querySelector("input");input.click(),input.onchange=function(){var file=input.files[0],reader=new FileReader;reader.readAsText(file),reader.onload=function(e){var graphObj=JSON.parse(e.target.result);Graph2(graphObj.nodes,graphObj.edges).then(function(){bindCustomEvents()})},$scope.simulationRunning=!1,$scope.simulationStepRunning=!1}},$scope.isGraphInitialized=function(){return Graph2.isInitialized()},$scope.checkGraph=function(){if(Graph2.isInitialized())try{Practice(),Practice.checkGraph(),customAlert({type:"success",message:"Everything OK"})}catch(err){customAlert(err)}else customAlert({message:"Graph not initialized"})},$scope.runSimulation=function(){try{Graph2.resize(),Practice(),Practice.checkGraph();var modalInstance=$modal.open({templateUrl:"partial/ModalVisualizationModePartial.htm",size:"sm",controller:function($scope,$modalInstance){$scope.isCollapsed=!0,$scope.type="step",$scope.interval=500,$scope.select=function(){$modalInstance.close({type:$scope.type,intervalTime:$scope.interval})}}});modalInstance.result.then(function(selected){"auto"==selected.type?($scope.simulationRunning=!0,Practice.runIntervalSimulation(selected.intervalTime).then(function(){$scope.simulationRunning=!1})):"step"==selected.type&&(Practice.runStepSimulation(),$scope.simulationStepRunning=!0)},function(){console.log("dismiss")})}catch(err){$scope.simulationRunning=!1,customAlert(err)}},$scope.simulationStep=function(){0==Practice.simulationStep()&&($scope.simulationStepRunning=!1)},$scope.generateRuntimeTable=function(){var modalInstance=$modal.open({templateUrl:"partial/ModalRuntimeTablePartial.htm",controller:"PracticeRuntimeTableController",size:"lg",resolve:{runTimeNodePerInstantsTable:function(){return Practice.getTableNodePerInstants()}}});modalInstance.result.then(function(){},function(){console.log("Chart Modal dismissed at: "+new Date)})},$scope.generatePowerSet=function(){var modalInstance=$modal.open({templateUrl:"partial/ModalChartPartial.htm",controller:"PracticeChartsController",size:"lg",windowClass:"modalChart"});modalInstance.result.then(function(){},function(){console.log("Chart Modal dismissed at: "+new Date)})},$scope.saveModifications=function(){if($scope.modifierIsNode)try{""!=$scope.nodeDescriptionModifier.trim()&&""!=$scope.nodeGroupModifier.trim()&&""!=$scope.nodeGroupModifier.trim()&&""!=$scope.nodeTypeModifier.trim()&&(Graph2.setNodeDescription($scope.nodeNameModifier,$scope.nodeDescriptionModifier),Graph2.setNodeProvider($scope.nodeNameModifier,$scope.nodeGroupModifier),Graph2.setNodeType($scope.nodeNameModifier,$scope.nodeTypeModifier),Graph2.setNodeFunc($scope.nodeNameModifier,$scope.nodeFuncModifier),Graph2.setNodeMem($scope.nodeNameModifier,$scope.nodeMemModifier),Graph2.setNodeRisk($scope.nodeNameModifier,$scope.nodeRiskModifier))}catch(err){console.log(err),customAlert({message:"Input not valid in node"})}else $scope.modifierIsEdge&&Graph2.setEdgeLabel($scope.edgeIdModifier,$scope.edgeLabelModifier);Graph2.redesign()},$scope.removeElement=function(){if($scope.modifierIsNode)try{Graph2.removeNode($scope.nodeNameModifier)}catch(err){customAlert(err)}else try{Graph2.removeEdge($scope.edgeIdModifier)}catch(err){customAlert(err)}bindCustomEvents(),$scope.showModifier(!1)}}),angular.module("PracticeSimulator").controller("PracticeRuntimeTableController",function($scope,$modalInstance,runTimeNodePerInstantsTable){$scope.trHeader=["#"],$scope.table=[],console.log(runTimeNodePerInstantsTable);for(var node in runTimeNodePerInstantsTable[0])$scope.trHeader.push(node);for(var i=0;i<runTimeNodePerInstantsTable.length;i++){$scope.table[i]=[];for(var j=1;j<$scope.trHeader.length;j++)$scope.table[i].push(runTimeNodePerInstantsTable[i][$scope.trHeader[j]])}$scope.exit=function(){$modalInstance.close()}});